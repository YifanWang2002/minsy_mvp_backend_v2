# Development profile.
# Copy to env/.env.dev.
# Passwords/keys belong in env/.env.secrets (not here).
# Optional service overrides:
# - env/.env.dev.api
# - env/.env.dev.mcp
# - env/.env.dev.worker_cpu
# - env/.env.dev.worker_io
# - env/.env.dev.beat

# ── App Runtime ──────────────────────────────────
APP_ENV=dev
DEBUG=true
LOG_LEVEL=INFO
HOST=0.0.0.0
PORT=8000
API_PUBLIC_BASE_URL=http://127.0.0.1:8000

# ── MCP URLs ─────────────────────────────────────
# Recommended: public dev domain mapped by Cloudflare Tunnel.
MCP_SERVER_URL_STRATEGY_DEV=https://dev.minsyai.com/strategy/mcp
MCP_SERVER_URL_BACKTEST_DEV=https://dev.minsyai.com/backtest/mcp
MCP_SERVER_URL_MARKET_DATA_DEV=https://dev.minsyai.com/market/mcp
MCP_SERVER_URL_STRESS_DEV=https://dev.minsyai.com/stress/mcp
MCP_SERVER_URL_TRADING_DEV=https://dev.minsyai.com/trading/mcp
MCP_SERVER_URL_STRATEGY_PROD=https://mcp.minsyai.com/strategy/mcp
MCP_SERVER_URL_BACKTEST_PROD=https://mcp.minsyai.com/backtest/mcp
MCP_SERVER_URL_MARKET_DATA_PROD=https://mcp.minsyai.com/market/mcp
MCP_SERVER_URL_STRESS_PROD=https://mcp.minsyai.com/stress/mcp
MCP_SERVER_URL_TRADING_PROD=https://mcp.minsyai.com/trading/mcp

# ── Database ─────────────────────────────────────
# Password in env/.env.secrets
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_DB=minsy_pgsql

# ── Redis ────────────────────────────────────────
# Password in env/.env.secrets
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ── Celery ───────────────────────────────────────
# db1 for broker, db2 for results; leave empty to fallback to REDIS_DB.
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_TASK_DEFAULT_QUEUE=backtest
CELERY_WORKER_MAX_MEMORY_PER_CHILD=524288
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# ── Paper Trading & Market Data ──────────────────
# Development safety: EXECUTE_ORDERS=false prevents real order submission.
PAPER_TRADING_ENABLED=true
PAPER_TRADING_ENQUEUE_ON_START=true
PAPER_TRADING_EXECUTE_ORDERS=false
PAPER_TRADING_RUNTIME_TASK_EXPIRES_SECONDS=120
PAPER_TRADING_QUEUE_BACKLOG_SOFT_LIMIT=2000
PAPER_TRADING_SCHEDULER_MAX_ENQUEUES_PER_TICK=500

# Keep memory cache on in dev; Redis switches follow APP_ENV defaults when blank.
MARKET_DATA_MEMORY_CACHE_ENABLED=true
MARKET_DATA_REDIS_WRITE_ENABLED=
MARKET_DATA_REDIS_READ_ENABLED=
MARKET_DATA_REDIS_SUBS_ENABLED=
MARKET_DATA_RUNTIME_FAIL_FAST_ON_REDIS_ERROR=

# ── Flower (Celery monitoring) ───────────────────
# Password in env/.env.secrets
FLOWER_ENABLED=false

# ── Observability ────────────────────────────────
# SENTRY_DSN in env/.env.secrets
SENTRY_ENV=development
SENTRY_TRACES_SAMPLE_RATE=0.0
SENTRY_PROFILES_SAMPLE_RATE=0.0
